function fprom_obj_(){$this=this,this.data={};var n=this.data,e="https://firstpromoter.com/track/signup",r="https://firstpromoter.com/track/new",i="_fprom_track",t="_fprom_subscribe",o="_fprom_code",u="_fprom_signup",f=86400,a=void 0;function c(e,r){n.cid=e,n.domain=r,n.tid=v(i),n.subscribed=v(t),n.ref_id=v(o),n.signed_up=v(u),n.referrer=document.referrer,n.url_ref_id=function(){var n=function(n){if(n.indexOf("#_offer_")>=0||n.indexOf("#_r_")>=0){var e=n.substring(n.indexOf("#_")+1,n.length);return e}return null}(l());n||(als=_(l(),"fp_ref"),als||(als=_(l(),"fpr")),als&&(n="_r_"+als));return n}(),n.url_ref_id&&n.ref_id==n.url_ref_id&&g(u,"",-1),n.url=l(),function(){var e=window._fprom||window._fprom||[];if(e.loaded)return!1;for(var r=0;r<e.length;r++)n[e[r][0]]=e[r][1];return e.loaded=!0,window._fprom=e,!0}()&&(!function(){var e=!1;!n.url_ref_id||n.url_ref_id==n.ref_id||n.subscribed||n.signed_up||(n.tid=p(),e=!0);n.url_tracking&&!n.tid&&(e=!0);"signup"==n.event?w():e&&m()}(),n._init&&"function"==typeof n._init&&n._init($this))}function s(n,e,r,i){var t,o,u,f=(t=n,o=e,"withCredentials"in(u=new XMLHttpRequest)?u.open(t,o):"undefined"!=typeof XDomainRequest?(u=new XDomainRequest).open(t,o):u=null,u);f?(f.onload=function(n){i&&"function"==typeof i&&i(f)},f.onerror=function(){console.log("FirstPromoter: Error on CORS ajax request!"),i&&"function"==typeof i&&i(f)},f.setRequestHeader("Content-Type","application/json"),f.send(JSON.stringify(r))):console.log("CORS not supported")}function d(n,e){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r}function l(){return window.location.href}function p(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=16*Math.random()|0;return("x"==n?e:3&e|8).toString(16)})}function _(n,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=n.substr(n.indexOf("?")),i=r.indexOf("#");i>-1&&(r=r.substr(0,i));var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(r);return null===t?null:decodeURIComponent(t[1].replace(/\+/g," "))}function x(n){var e;try{e=JSON.parse(n)}catch(n){}return e||{}}function g(e,r,i){var t="",o="";if(i){var u=new Date;u.setTime(u.getTime()+60*i*1e3),t="; expires="+u.toGMTString()}n.domain&&(o="; domain="+n.domain),document.cookie=e+"="+escape(r)+t+o+"; path=/"}function v(n){var e,r,i=n+"=",t=document.cookie.split(";");for(e=0;e<t.length;e++){for(r=t[e];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(i))return unescape(r.substring(i.length,r.length))}return null}function h(n){var e={};for(var r in n)n.hasOwnProperty(r)&&"_"!=r.charAt(0)&&(e[r]=n[r]);return e}function m(e,t){(n=d(n,e||{})).event="click",n.url_tracking&&!n.tid&&(n.tid=p());var u=h(n);s("POST",r,u,function(n){var e,r,c=x(n.responseText);200==n.status&&(c.cookie_life&&(a=1440*c.cookie_life),r=u.url_ref_id,g(o,r,a||f),e=u.tid,g(i,e,a||f)),t&&"function"==typeof t&&t(c)})}function w(r,i){if(!n.signed_up&&n.tid){(n=d(n,r||{})).event="signup";var t=h(n);if(!t.email&&!t.uid)return void console.log("Email or UID is required.");s("POST",e,t,function(e){var r,o=x(e.responseText);200==e.status&&o.cookie_life&&(a=1440*o.cookie_life),r=t.tid,n.signed_up=!0,g(u,r,a||f),i&&"function"==typeof i&&i(o)})}else i&&"function"==typeof i&&i()}this.trackVisitor=function(n,e){m(n,e)},this.trackSignup=function(n,e){w(n,e)},this.trackSale=function(n,e){w(n,e)},this.init=function(n,e){c(n,e)}}window.$FPROM=new fprom_obj_;